INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 10 , 10 , 'P' , 3009 , 320 , 37 , 'MARGARITA SANCHEZ' , 'MARGARITA' , 'SANCHEZ' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 11 , 11 , 'P' , 3009 , 320 , 37 , 'RICARDO LASCANO' , 'RICARDO' , 'LASCANO' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 12 , 12 , 'P' , 3009 , 320 , 37 , 'GEMA ROMERO' , 'GEMA' , 'ROMERO' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 13 , 13 , 'P' , 3009 , 320 , 37 , 'RODRIGO ARELLANO' , 'RODRIGO' , 'ARELLANO' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 14 , 14 , 'P' , 3009 , 320 , 37 , 'MARIA JOSE FUENTES' , 'MARIA JOSE' , 'FUENTES' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 15 , 15 , 'P' , 3009 , 320 , 37 , 'PABLO VIVEROS' , 'PABLO' , 'VIVEROS' , 'M' , false );

INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 16 , 16 , 'P' , 3012 , 320 , 37 , 'JESSICA BENGOA' , 'JESSICA' , 'BENGOA' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 17 , 17 , 'P' , 3012 , 320 , 37 , 'JULIO CONTRERAS' , 'JULIO' , 'CONTRERAS' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 18 , 18 , 'P' , 3012 , 320 , 37 , 'CONSTANZA AGUILAR' , 'CONSTANZA' , 'AGUILAR' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 19 , 19 , 'P' , 3012 , 320 , 37 , 'PABLO BUSSENIUS' , 'PABLO' , 'BUSSENIUS' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 20 , 20 , 'P' , 3012 , 320 , 37 , 'ANDREA PIVCEVIC' , 'ANDRES' , 'PAVCEVIC' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 21 , 21 , 'P' , 3012 , 320 , 37 , 'IGNACIO QUIJADA' , 'IGNACIO' , 'QUIJADA' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 22 , 22 , 'P' , 3012 , 320 , 37 , 'VICTORIA TRAP' , 'VICTORIA' , 'TRAP' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 23 , 23 , 'P' , 3012 , 320 , 37 , 'VICTOR HERNANDEZ' , 'VICTOR' , 'HERNANDEZ' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 24 , 24 , 'P' , 3012 , 320 , 37 , 'FRANCISCA ROJAS' , 'FRANCISCA' , 'ROJAS' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 25 , 25 , 'P' , 3012 , 320 , 37 , 'ALFONSO CAMPOS' , 'ALFONSO' , 'CAMPOS' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 26 , 26 , 'P' , 3012 , 320 , 37 , 'CECILIA CARDENAS' , 'CECILIA' , 'CARDENAS' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 27 , 27 , 'P' , 3012 , 320 , 37 , 'CARLOS MIHOVILOVIC' , 'CARLOS' , 'MOHOVILOVIC' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 28 , 28 , 'P' , 3012 , 320 , 37 , 'CLAUDIA MAC-LEAN' , 'CLAUDIA' , 'MAC-LEAN' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 29 , 29 , 'P' , 3012 , 320 , 37 , 'VICTOR ARAVENA' , 'VICTOR' , 'ARAVENA' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 30 , 30 , 'P' , 3012 , 320 , 37 , 'LUZ GUZMAN' , 'LUZ' , 'GUZMAN' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 31 , 31 , 'P' , 3012 , 320 , 37 , 'ROBERT WEISSOHN' , 'ROBERT' , 'WEISSOHN' , 'M' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 32 , 32 , 'P' , 3012 , 320 , 37 , 'VERONICA ROJAS' , 'VERONICA' , 'ROJAS' , 'F' , false );
INSERT INTO candidato ( candidato_id , candidato_orden , candidato_tipo , candidato_zona , pacto_id , partido_id , candidato_nombre , candidato_nombres , candidato_apellidos , candidato_genero , candidato_independiente ) VALUES ( 33 , 33 , 'P' , 3012 , 320 , 37 , 'MARCELO TOLEDO' , 'MARCELO' , 'TOLEDO' , 'M' , false );



--
-- PostgreSQL database dump
--

-- Dumped from database version 9.2.24
-- Dumped by pg_dump version 14.0

SET statement_timeout = 0;
SET lock_timeout = 0;
SET idle_in_transaction_session_timeout = 0;
SET client_encoding = 'UTF8';
SET standard_conforming_strings = on;
SELECT pg_catalog.set_config('search_path', '', false);
SET check_function_bodies = false;
SET xmloption = content;
SET client_min_messages = warning;
SET row_security = off;

--
-- Name: imagen_eliminar(bigint, bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.imagen_eliminar(in_imagen_id bigint, in_imagen_objeto bigint) RETURNS TABLE(imagen_id bigint, imagen_objeto bigint, imagen_tipo character varying, imagen_extension character varying)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

        	imagen.imagen_id,

        	imagen.imagen_objeto,

        	imagen.imagen_tipo,

        	imagen.imagen_extension

	    FROM

	        imagen

	    WHERE

	        imagen.imagen_id = in_imagen_id AND

	        imagen.imagen_objeto = in_imagen_objeto

	    LIMIT 1

	    ;

	--	Eliminar Imagen

        DELETE FROM

        	imagen

        WHERE

        	imagen.imagen_id = in_imagen_id AND

        	imagen.imagen_objeto = in_imagen_objeto

        ;

	END $$;


ALTER FUNCTION public.imagen_eliminar(in_imagen_id bigint, in_imagen_objeto bigint) OWNER TO postgres;

--
-- Name: imagen_listado(bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.imagen_listado(in_imagen_objeto bigint, in_imagen_tipo character varying) RETURNS TABLE(imagen_id bigint, imagen_orden bigint, imagen_objeto bigint, imagen_tipo character varying, imagen_extension character varying, imagen_cambio bigint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

        	imagen.imagen_id,

        	imagen.imagen_orden,

        	imagen.imagen_objeto,

        	imagen.imagen_tipo,

        	imagen.imagen_extension,

        	imagen.imagen_cambio

	    FROM

	        imagen

	    WHERE

	        imagen.imagen_objeto = in_imagen_objeto AND

	        imagen.imagen_tipo = in_imagen_tipo

		ORDER BY

			imagen_orden ASC

	    LIMIT 50

	    ;

	END $$;


ALTER FUNCTION public.imagen_listado(in_imagen_objeto bigint, in_imagen_tipo character varying) OWNER TO postgres;

--
-- Name: imagen_nueva(bigint, bigint, character varying, character varying, bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.imagen_nueva(in_imagen_id bigint, in_imagen_objeto bigint, in_imagen_tipo character varying, in_imagen_extension character varying, in_imagen_cambio bigint) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_imagen_id bigint;

			v_orden bigint;

		BEGIN

		-- verificar si email ya esta registrado

		select count(*) from imagen where imagen_objeto = in_imagen_objeto INTO v_orden;

        INSERT INTO imagen

        (

        	imagen_id,

        	imagen_orden,

        	imagen_objeto,

        	imagen_tipo,

        	imagen_extension,

        	imagen_cambio

        )

		VALUES

		(

        	in_imagen_id,

        	v_orden,

        	in_imagen_objeto,

        	in_imagen_tipo,

        	in_imagen_extension,

        	in_imagen_cambio

		);

        RETURN v_imagen_id;

	END $$;


ALTER FUNCTION public.imagen_nueva(in_imagen_id bigint, in_imagen_objeto bigint, in_imagen_tipo character varying, in_imagen_extension character varying, in_imagen_cambio bigint) OWNER TO postgres;

--
-- Name: mesa_activar(bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mesa_activar(in_mesa_id bigint, in_mesa_numero character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

		UPDATE

			mesa

		SET

			mesa_estado = 1,

			mesa_numero = in_mesa_numero,

			mesa_cambio = now()

		WHERE mesa_id = in_mesa_id;

		return 1;

	END $$;


ALTER FUNCTION public.mesa_activar(in_mesa_id bigint, in_mesa_numero character varying) OWNER TO postgres;

--
-- Name: mesa_candidato_guardar(bigint, character varying, character varying); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_candidato_guardar(in_candidato_id bigint, in_candidato_nombres character varying, in_candidato_apellidos character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$
	    
		DECLARE
		BEGIN

	--  Actualizar Candidato
		UPDATE
			candidato
			
		SET
			candidato_nombres = in_candidato_nombres,
			candidato_apellidos = in_candidato_apellidos
		
		WHERE
			candidato_id = in_candidato_id
		;
		
		RETURN 1;
		
	END $$;


ALTER FUNCTION public.mesa_candidato_guardar(in_candidato_id bigint, in_candidato_nombres character varying, in_candidato_apellidos character varying) OWNER TO app_vav;

--
-- Name: mesa_candidatos(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_candidatos(in_mesa_id bigint) RETURNS TABLE(voto_id bigint, voto_total smallint, candidato_id bigint, candidato_nombre character varying, candidato_nombres character varying, candidato_apellidos character varying, candidato_lista character varying)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
	    SELECT
            voto.voto_id,
            voto.voto_total,
            voto.candidato_id,
            candidato.candidato_nombre,
			candidato.candidato_nombres,
			candidato.candidato_apellidos,
			candidato.candidato_lista
	
	    FROM
            candidato,
            voto
	
	    WHERE
	        candidato.candidato_id  =   voto.candidato_id AND
	        voto.mesa_id = in_mesa_id

		ORDER BY candidato.candidato_orden ASC
	    ;
	
	END $$;


ALTER FUNCTION public.mesa_candidatos(in_mesa_id bigint) OWNER TO app_vav;

--
-- Name: mesa_candidatos_swich(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_candidatos_swich(in_mesa_id bigint) RETURNS TABLE(voto_id bigint, voto_total smallint, candidato_id bigint, candidato_nombres character varying, candidato_apellidos character varying, candidato_genero character varying, candidato_independiente boolean, candidato_lista character varying, partido_codigo character varying, pacto_codigo character varying)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
	    SELECT
            voto.voto_id,
            voto.voto_total,
            voto.candidato_id,
			candidato.candidato_nombres,
			candidato.candidato_apellidos,
			candidato.candidato_genero,
			candidato.candidato_independiente,
			candidato.candidato_lista,
			partido.partido_codigo,
			pacto.pacto_codigo
	
	    FROM
			pacto,
			partido,
            candidato,
            voto
	
	    WHERE
			pacto.pacto_id = candidato.pacto_id AND
			partido.partido_id = candidato.partido_id AND
	        candidato.candidato_id = voto.candidato_id AND
	        voto.mesa_id = in_mesa_id

		ORDER BY candidato.candidato_orden ASC
	    ;
	
	END $$;


ALTER FUNCTION public.mesa_candidatos_swich(in_mesa_id bigint) OWNER TO app_vav;

--
-- Name: mesa_contar_total(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mesa_contar_total() RETURNS TABLE(objetos bigint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

		SELECT

			count(mesa_id) AS objetos 

		FROM

			mesa

	    ;

	END $$;


ALTER FUNCTION public.mesa_contar_total() OWNER TO postgres;

--
-- Name: mesa_destacada(bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mesa_destacada(in_mesa_id bigint) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_id bigint;

			v_estado bigint;

		BEGIN

	--	Obtener Estado Actual

		SELECT mesa_destacada FROM mesa WHERE mesa_id = in_mesa_id INTO v_estado;

		IF v_estado = 1 THEN

			UPDATE

				mesa

			SET

				mesa_destacada = 0,

				mesa_cambio = now()

			WHERE mesa_id = in_mesa_id;

			return 0;

		ELSE

			UPDATE

				mesa

			SET

				mesa_destacada = 1,

				mesa_cambio = now()

			WHERE mesa_id = in_mesa_id;

			return 1;

		END IF;

	END $$;


ALTER FUNCTION public.mesa_destacada(in_mesa_id bigint) OWNER TO postgres;

--
-- Name: mesa_detalles(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_detalles(in_mesa_id bigint) RETURNS TABLE(mesa_id bigint, usuario_id bigint, mesa_tipo character varying, mesa_zona bigint, mesa_zona_titulo character varying, mesa_comuna character varying, mesa_local character varying, mesa_numero character varying, mesa_orden smallint, mesa_estado smallint, mesa_destacada smallint, mesa_votos_blancos smallint, mesa_votos_nulos smallint, mesa_cambio timestamp without time zone, mesa_creado timestamp without time zone, usuario_nombre character varying)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

            mesa.mesa_id,

            mesa.usuario_id,

            mesa.mesa_tipo,

            mesa.mesa_zona,

            mesa.mesa_zona_titulo,

			mesa.mesa_comuna,

            mesa.mesa_local,

            mesa.mesa_numero,

            mesa.mesa_orden,

            mesa.mesa_estado,

            mesa.mesa_destacada,

            mesa.mesa_votos_blancos,

            mesa.mesa_votos_nulos,

            mesa.mesa_cambio,

            mesa.mesa_creado,

			usuario.usuario_nombre

	    FROM

			usuario,

	        mesa

	    WHERE

			usuario.usuario_id = mesa.usuario_id AND

	        mesa.mesa_id = in_mesa_id

	    LIMIT 1

	    ;

	END $$;


ALTER FUNCTION public.mesa_detalles(in_mesa_id bigint) OWNER TO app_vav;

--
-- Name: mesa_detalles_swich(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_detalles_swich(in_mesa_id bigint) RETURNS TABLE(mesa_id bigint, mesa_tipo character varying, mesa_zona_titulo character varying, mesa_comuna character varying, mesa_local character varying, mesa_numero character varying)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

            mesa.mesa_id,

            mesa.mesa_tipo,

            mesa.mesa_zona_titulo,

			mesa.mesa_comuna,

            mesa.mesa_local,

            mesa.mesa_numero

	    FROM

	        mesa

	    WHERE

	        mesa.mesa_id = in_mesa_id

	    LIMIT 1

	    ;

	END $$;


ALTER FUNCTION public.mesa_detalles_swich(in_mesa_id bigint) OWNER TO app_vav;

--
-- Name: mesa_editar(bigint, bigint, bigint, character varying, character varying, character varying, character varying, bigint, bigint, bigint, bigint, bigint, bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mesa_editar(in_mesa_id bigint, in_usuario_id bigint, in_mesa_estado bigint, in_mesa_nombre character varying, in_mesa_numero character varying, in_mesa_region character varying, in_mesa_ciudad character varying, in_mesa_voto_a bigint, in_mesa_voto_r bigint, in_mesa_voto_ar_blanco bigint, in_mesa_voto_ar_nulo bigint, in_mesa_voto_cm bigint, in_mesa_voto_cc bigint, in_mesa_voto_cmcc_blanco bigint, in_mesa_voto_cmcc_nulo bigint) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

	--	Editar mesa

		UPDATE

			mesa

		SET

			usuario_id	= in_usuario_id,

			mesa_estado = in_mesa_estado,

			mesa_nombre = in_mesa_nombre,

			mesa_numero = in_mesa_numero,

			mesa_region = in_mesa_region,

			mesa_ciudad = in_mesa_ciudad,

			mesa_voto_a = in_mesa_voto_a,

			mesa_voto_r = in_mesa_voto_r,

			mesa_voto_ar_blanco = in_mesa_voto_ar_blanco,

			mesa_voto_ar_nulo = in_mesa_voto_ar_nulo,

			mesa_voto_cm = in_mesa_voto_cm,

			mesa_voto_cc = in_mesa_voto_cc,

			mesa_voto_cmcc_blanco = in_mesa_voto_cmcc_blanco,

			mesa_voto_cmcc_nulo = in_mesa_voto_cmcc_nulo,

			mesa_cambio = now()

		WHERE

			mesa_id = in_mesa_id

		;

		RETURN 1;

	END $$;


ALTER FUNCTION public.mesa_editar(in_mesa_id bigint, in_usuario_id bigint, in_mesa_estado bigint, in_mesa_nombre character varying, in_mesa_numero character varying, in_mesa_region character varying, in_mesa_ciudad character varying, in_mesa_voto_a bigint, in_mesa_voto_r bigint, in_mesa_voto_ar_blanco bigint, in_mesa_voto_ar_nulo bigint, in_mesa_voto_cm bigint, in_mesa_voto_cc bigint, in_mesa_voto_cmcc_blanco bigint, in_mesa_voto_cmcc_nulo bigint) OWNER TO postgres;

--
-- Name: mesa_eliminar(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_eliminar(in_mesa_id bigint) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

	--	Eliminar votos

        DELETE FROM voto WHERE voto.mesa_id = in_mesa_id;

	--	Eliminar mesa

        DELETE FROM mesa WHERE mesa.mesa_id = in_mesa_id;

		RETURN 1;

	END $$;


ALTER FUNCTION public.mesa_eliminar(in_mesa_id bigint) OWNER TO app_vav;

--
-- Name: mesa_guardar(bigint, bigint, bigint, character varying, character varying, character varying); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_guardar(in_mesa_id bigint, in_usuario_id bigint, in_mesa_estado bigint, in_mesa_comuna character varying, in_mesa_local character varying, in_mesa_numero character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

	--	Editar mesa

		UPDATE

			mesa

		SET

			usuario_id	= in_usuario_id,

			mesa_estado = in_mesa_estado,

			mesa_comuna = in_mesa_comuna,

			mesa_local = in_mesa_local,

			mesa_numero = in_mesa_numero,

			mesa_cambio = now()

		WHERE

			mesa_id = in_mesa_id

		;

		RETURN 1;

	END $$;


ALTER FUNCTION public.mesa_guardar(in_mesa_id bigint, in_usuario_id bigint, in_mesa_estado bigint, in_mesa_comuna character varying, in_mesa_local character varying, in_mesa_numero character varying) OWNER TO app_vav;

--
-- Name: mesa_listado(integer, integer); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_listado(in_limit integer, in_offset integer) RETURNS TABLE(mesa_id bigint, usuario_id bigint, mesa_tipo character varying, mesa_orden smallint, mesa_destacada smallint, mesa_estado smallint, mesa_zona bigint, mesa_zona_titulo character varying, mesa_comuna character varying, mesa_local character varying, mesa_numero character varying, mesa_votos_blancos smallint, mesa_votos_nulos smallint, mesa_cambio timestamp without time zone, mesa_creado timestamp without time zone, usuario_nombre character varying)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
	    SELECT
		    mesa.mesa_id,
		    mesa.usuario_id,
			mesa.mesa_tipo,
			mesa.mesa_orden,
		    mesa.mesa_destacada,
		    mesa.mesa_estado,
			mesa.mesa_zona,
			mesa.mesa_zona_titulo,
			mesa.mesa_comuna,
		    mesa.mesa_local,
		    mesa.mesa_numero,
		    mesa.mesa_votos_blancos,
		    mesa.mesa_votos_nulos,
			mesa.mesa_cambio,
			mesa.mesa_creado,
			usuario.usuario_nombre
	
	    FROM
	        mesa,
	        usuario
	        
		WHERE
			mesa.usuario_id = usuario.usuario_id
	
	    ORDER BY
			mesa.mesa_estado DESC,
	        mesa.mesa_cambio DESC
	
	    LIMIT in_limit OFFSET in_offset
	    ;
	
	END $$;


ALTER FUNCTION public.mesa_listado(in_limit integer, in_offset integer) OWNER TO app_vav;

--
-- Name: mesa_nuevo(bigint, character varying, bigint, character varying, character varying); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_nuevo(in_usuario_id bigint, in_mesa_tipo character varying, in_mesa_zona bigint, in_mesa_zona_titulo character varying, in_mesa_comuna character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			in_mesa_id bigint;

		BEGIN

        SELECT nextval('mesa_id_seq') INTO in_mesa_id;

        INSERT INTO mesa

        (

        	mesa_id,

        	usuario_id,

            mesa_tipo,

            mesa_zona,

            mesa_zona_titulo,

			mesa_comuna

        )

		VALUES

		(

			in_mesa_id,

			in_usuario_id,

            in_mesa_tipo,

            in_mesa_zona,

            in_mesa_zona_titulo,

			in_mesa_comuna

		);

    --  AGREGAR CANDIDATOS A LA MESA

        INSERT INTO voto (candidato_id, mesa_id, voto_total) SELECT candidato_id, in_mesa_id, 0 FROM candidato WHERE candidato_tipo = in_mesa_tipo AND candidato_zona = in_mesa_zona;

        RETURN in_mesa_id;

	END $$;


ALTER FUNCTION public.mesa_nuevo(in_usuario_id bigint, in_mesa_tipo character varying, in_mesa_zona bigint, in_mesa_zona_titulo character varying, in_mesa_comuna character varying) OWNER TO app_vav;

--
-- Name: mesa_obtener_datos(bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.mesa_obtener_datos(in_mesa_id bigint) RETURNS TABLE(mesa_id bigint, usuario_id bigint, mesa_destacada smallint, mesa_estado smallint, mesa_nombre character varying, mesa_numero character varying, mesa_region character varying, mesa_ciudad character varying, mesa_voto_a smallint, mesa_voto_r smallint, mesa_voto_ar_blanco smallint, mesa_voto_ar_nulo smallint, mesa_voto_cm smallint, mesa_voto_cc smallint, mesa_voto_cmcc_blanco smallint, mesa_voto_cmcc_nulo smallint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

		    mesa.mesa_id,

		    mesa.usuario_id,

		    mesa.mesa_destacada,

		    mesa.mesa_estado,

		    mesa.mesa_nombre,

		    mesa.mesa_numero,

		    mesa.mesa_region,

		    mesa.mesa_ciudad,

		    mesa.mesa_voto_a,

		    mesa.mesa_voto_r,

		    mesa.mesa_voto_ar_blanco,

		    mesa.mesa_voto_ar_nulo,

		    mesa.mesa_voto_cm,

		    mesa.mesa_voto_cc,

		    mesa.mesa_voto_cmcc_blanco,

		    mesa.mesa_voto_cmcc_nulo

	    FROM

	        mesa

	    WHERE

	        mesa.mesa_id = in_mesa_id

	    LIMIT 1

	    ;

	END $$;


ALTER FUNCTION public.mesa_obtener_datos(in_mesa_id bigint) OWNER TO postgres;

--
-- Name: mesa_usuario_contar_total(bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_usuario_contar_total(in_usuario_id bigint) RETURNS TABLE(objetos bigint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

		SELECT

			count(mesa_id) AS objetos

		FROM

			mesa

		WHERE

			usuario_id = in_usuario_id

	    ;

	END $$;


ALTER FUNCTION public.mesa_usuario_contar_total(in_usuario_id bigint) OWNER TO app_vav;

--
-- Name: mesa_usuario_listado(bigint, integer, integer); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_usuario_listado(in_usuario_id bigint, in_limit integer, in_offset integer) RETURNS TABLE(mesa_id bigint, usuario_id bigint, mesa_tipo character varying, mesa_orden smallint, mesa_destacada smallint, mesa_estado smallint, mesa_zona bigint, mesa_zona_titulo character varying, mesa_comuna character varying, mesa_local character varying, mesa_numero character varying, mesa_votos_blancos smallint, mesa_votos_nulos smallint, mesa_cambio timestamp without time zone, mesa_creado timestamp without time zone, usuario_nombre character varying)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

		    mesa.mesa_id,

		    mesa.usuario_id,

			mesa.mesa_tipo,

			mesa.mesa_orden,

		    mesa.mesa_destacada,

		    mesa.mesa_estado,

			mesa.mesa_zona,

			mesa.mesa_zona_titulo,

			mesa.mesa_comuna,

		    mesa.mesa_local,

		    mesa.mesa_numero,

		    mesa.mesa_votos_blancos,

		    mesa.mesa_votos_nulos,

			mesa.mesa_cambio,

			mesa.mesa_creado,

			usuario.usuario_nombre

	    FROM

	        mesa,

	        usuario

		WHERE

			mesa.usuario_id = usuario.usuario_id AND

            mesa.usuario_id = in_usuario_id

	    ORDER BY

	        mesa.mesa_destacada DESC,

			mesa.mesa_estado DESC,

	        mesa.mesa_cambio DESC

	    LIMIT in_limit OFFSET in_offset

	    ;

	END $$;


ALTER FUNCTION public.mesa_usuario_listado(in_usuario_id bigint, in_limit integer, in_offset integer) OWNER TO app_vav;

--
-- Name: mesa_voto(bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.mesa_voto(in_mesa_id bigint, in_voto_id bigint, in_voto_total bigint) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

	--  Actualizar Votos

		UPDATE

			voto

		SET

			voto_total = in_voto_total

		WHERE

		    voto.voto_id = in_voto_id

		;

	--  Actualizar Mesa

		UPDATE

			mesa

		SET

			mesa_cambio = now()

		WHERE

			mesa.mesa_id = in_mesa_id

		;

		RETURN 1;

	END $$;


ALTER FUNCTION public.mesa_voto(in_mesa_id bigint, in_voto_id bigint, in_voto_total bigint) OWNER TO app_vav;

--
-- Name: objeto_estado(bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.objeto_estado(in_objeto_id bigint, in_objeto_tipo character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_id bigint;

			v_estado bigint;

		BEGIN

	--	Validar Tipo de Objeto 

		CASE 

		--	Usuarios

			WHEN in_objeto_tipo = 'USU' THEN

			--	Obtener Estado Actual

				SELECT usuario_estado FROM usuario WHERE usuario_id = in_objeto_id INTO v_estado;

				IF v_estado = 1 THEN

					UPDATE usuario SET usuario_estado = 0 WHERE usuario_id = in_objeto_id;

					return 0;

			    ELSE

					UPDATE usuario SET usuario_estado = 1 WHERE usuario_id = in_objeto_id;

					return 1;

			    END IF;

		--	Mesas

			WHEN in_objeto_tipo = 'MES' THEN

			--	Obtener Estado Actual

				SELECT mesa_estado FROM mesa WHERE mesa_id = in_objeto_id INTO v_estado;

				IF v_estado = 1 THEN

					UPDATE

						mesa

					SET

						mesa_estado = 0,

						mesa_cambio = now()

					WHERE mesa_id = in_objeto_id;

					return 0;

			    ELSE

					UPDATE

						mesa

					SET

						mesa_estado = 1,

						mesa_cambio = now()

					WHERE mesa_id = in_objeto_id;

					return 1;

			    END IF;

			ELSE

		END CASE;

	END $$;


ALTER FUNCTION public.objeto_estado(in_objeto_id bigint, in_objeto_tipo character varying) OWNER TO postgres;

--
-- Name: swich_actual(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.swich_actual() RETURNS TABLE(swich_mesa_1 smallint, swich_mesa_2 smallint, swich_mesa_3 smallint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

		    swich.swich_mesa_1,

		    swich.swich_mesa_2,

		    swich.swich_mesa_3

	    FROM

	        swich

		WHERE

			swich.swich_id = 1

	    LIMIT 1

	    ;

	END $$;


ALTER FUNCTION public.swich_actual() OWNER TO postgres;

--
-- Name: swich_editar(bigint, bigint, bigint, bigint, bigint, bigint, bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.swich_editar(in_swich_id bigint, in_swich_modo bigint, in_swich_mesas bigint, in_swich_mesa_1 bigint, in_swich_mesa_2 bigint, in_swich_mesa_3 bigint, in_swich_mesa_4 bigint, in_swich_votos character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

		BEGIN

		UPDATE

			swich

		SET

			swich_mesas = in_swich_mesas,

			swich_modo = in_swich_modo,

			swich_mesa_1 = in_swich_mesa_1,

			swich_mesa_2 = in_swich_mesa_2,

			swich_mesa_3 = in_swich_mesa_3,

			swich_mesa_4 = in_swich_mesa_4,

			swich_votos = in_swich_votos,

			swich_cambio = now()

		WHERE

			swich_id = in_swich_id

		;

		RETURN 1;

	END $$;


ALTER FUNCTION public.swich_editar(in_swich_id bigint, in_swich_modo bigint, in_swich_mesas bigint, in_swich_mesa_1 bigint, in_swich_mesa_2 bigint, in_swich_mesa_3 bigint, in_swich_mesa_4 bigint, in_swich_votos character varying) OWNER TO postgres;

--
-- Name: swich_mesas(bigint, bigint, bigint); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.swich_mesas(in_mesa_1 bigint, in_mesa_2 bigint, in_mesa_3 bigint) RETURNS TABLE(mesa_id bigint, mesa_tipo character varying, mesa_zona bigint, mesa_zona_titulo character varying, mesa_comuna character varying, mesa_local character varying, mesa_numero character varying)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
	    SELECT
            mesa.mesa_id,
            mesa.mesa_tipo,
			mesa.mesa_zona,
            mesa.mesa_zona_titulo,
			mesa.mesa_comuna,
            mesa.mesa_local,
            mesa.mesa_numero
	
	    FROM
	        mesa
	        
		WHERE
			mesa.mesa_id IN ( in_mesa_1 , in_mesa_2 , in_mesa_3 )
	
	    LIMIT 3
	    ;
	
	END $$;


ALTER FUNCTION public.swich_mesas(in_mesa_1 bigint, in_mesa_2 bigint, in_mesa_3 bigint) OWNER TO app_vav;

--
-- Name: swich_mesas_total(character varying); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.swich_mesas_total(in_mesa_tipo character varying) RETURNS TABLE(votos_total bigint, candidato_id bigint, candidato_nombres character varying, candidato_apellidos character varying, partido_codigo character varying)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
		SELECT
            sum(t2.voto_total) as votos_total,
            t3.candidato_id,
            t3.candidato_nombres,
            t3.candidato_apellidos,
            t4.partido_codigo
        from
            mesa t1,
            voto t2,
            candidato t3,
            partido t4
        WHERE
            t1.mesa_tipo = 'P' AND
            t1.mesa_estado = 1 AND
            t2.mesa_id = t1.mesa_id AND
            t3.candidato_id = t2.candidato_id AND
            t4.partido_id = t3.partido_id
        group by
            t3.candidato_id,
            t3.candidato_apellidos,
            t4.partido_codigo;

	END $$;


ALTER FUNCTION public.swich_mesas_total(in_mesa_tipo character varying) OWNER TO app_vav;

--
-- Name: swich_mesas_total_actuales(); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.swich_mesas_total_actuales() RETURNS TABLE(mesa bigint)
    LANGUAGE plpgsql
    AS $$
	    
		BEGIN
		return QUERY
		
		select t0.mesa_id AS mesa from (
		select t1.mesa_id, row_number() over (ORDER BY t1.mesa_id) as rownum
		from mesa t1 
		where t1.mesa_tipo = 'P' 
		and t1.mesa_estado = 1 
		order by t1.mesa_id ) as t0
		where t0.rownum <= 20;

	END $$;


ALTER FUNCTION public.swich_mesas_total_actuales() OWNER TO app_vav;

--
-- Name: swich_obtener_datos(bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.swich_obtener_datos(in_swich_id bigint) RETURNS TABLE(swich_mesas smallint, swich_modo smallint, swich_mesa_1 smallint, swich_mesa_2 smallint, swich_mesa_3 smallint, swich_mesa_4 smallint, swich_votos character varying, swich_cambio timestamp without time zone)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

	        swich.swich_mesas,

			swich.swich_modo,

	        swich.swich_mesa_1,

	        swich.swich_mesa_2,

	        swich.swich_mesa_3,

	        swich.swich_mesa_4,

			swich.swich_votos,

			swich.swich_cambio

	    FROM

	        swich

		WHERE

			swich.swich_id = in_swich_id

	    ;

	END $$;


ALTER FUNCTION public.swich_obtener_datos(in_swich_id bigint) OWNER TO postgres;

--
-- Name: usuario_contar_total(); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.usuario_contar_total() RETURNS TABLE(objetos bigint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

		SELECT

			count(usuario_id) AS objetos 

		FROM

			usuario

	    ;

	END $$;


ALTER FUNCTION public.usuario_contar_total() OWNER TO app_vav;

--
-- Name: usuario_editar(bigint, character varying, character varying, character varying, character varying, character varying, bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_editar(in_usuario_id bigint, in_usuario_rol character varying, in_usuario_nombre character varying, in_usuario_email character varying, in_usuario_password character varying, in_usuario_genero character varying, in_usuario_etiqueta bigint, in_imagenes character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_orden int;

			v_imagenes bigint;

			v_imagenes_array varchar[];

		BEGIN

	--	Comienzo del Orden

		v_orden = 0;

	--	Separar los ID de las Imagenes

        SELECT string_to_array(in_imagenes, ',') INTO v_imagenes_array;

	--	Actualizar Posicion de las imagenes

        FOREACH v_imagenes IN ARRAY v_imagenes_array LOOP

	        UPDATE

	        	imagen

	        SET

	        	imagen_orden = v_orden

	        WHERE

	        	imagen_id = v_imagenes AND

	        	imagen_objeto = in_usuario_id

	        ;

			v_orden = v_orden + 1;

        END LOOP;

	--	Editar Usuario

		UPDATE

			usuario

		SET

			usuario_rol = in_usuario_rol,

			usuario_nombre = in_usuario_nombre,

			usuario_email = in_usuario_email,

			usuario_genero = in_usuario_genero,

			usuario_etiqueta = in_usuario_etiqueta

		WHERE

			usuario_id = in_usuario_id

		;

	--	Validar Cambio de Password

		CASE 

		--	Sin Cambio de Password

			WHEN in_usuario_password = 'NULL' THEN

		--	Cambio de Password

			ELSE

				UPDATE

					usuario

				SET

					usuario_password = in_usuario_password

				WHERE

					usuario_id = in_usuario_id

				;

		END CASE;

		RETURN 1;

	END $$;


ALTER FUNCTION public.usuario_editar(in_usuario_id bigint, in_usuario_rol character varying, in_usuario_nombre character varying, in_usuario_email character varying, in_usuario_password character varying, in_usuario_genero character varying, in_usuario_etiqueta bigint, in_imagenes character varying) OWNER TO postgres;

--
-- Name: usuario_eliminar(bigint, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_eliminar(in_usuario_id bigint, in_imagen_tipo character varying) RETURNS TABLE(imagen_id bigint, imagen_objeto bigint, imagen_tipo character varying, imagen_extension character varying)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

        	imagen.imagen_id,

        	imagen.imagen_objeto,

        	imagen.imagen_tipo,

        	imagen.imagen_extension

	    FROM

	        imagen

	    WHERE

	        imagen.imagen_objeto = in_usuario_id AND

	        imagen.imagen_tipo = in_imagen_tipo

	    ;

	--	Eliminar Imagenes

        DELETE FROM

        	imagen

        WHERE

	        imagen.imagen_objeto = in_usuario_id AND

	        imagen.imagen_tipo = in_imagen_tipo

        ;

	--	Eliminar Usuario

        DELETE FROM

        	usuario

        WHERE

	        usuario.usuario_id = in_usuario_id

        ;

	END $$;


ALTER FUNCTION public.usuario_eliminar(in_usuario_id bigint, in_imagen_tipo character varying) OWNER TO postgres;

--
-- Name: usuario_iniciar_sesion(character varying, character varying); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_iniciar_sesion(in_usuario_email character varying, in_usuario_password character varying) RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_usuario bigint;

		BEGIN

	--	VALIDAR CREDENCIALES

		SELECT usuario_id FROM usuario WHERE usuario_email = in_usuario_email AND usuario_password = in_usuario_password INTO v_usuario;

	--	RESPUESTA DE LA QUERY

		IF v_usuario <1 THEN

	        RETURN 0;

	    ELSE

			RETURN v_usuario;

        END IF;

	END $$;


ALTER FUNCTION public.usuario_iniciar_sesion(in_usuario_email character varying, in_usuario_password character varying) OWNER TO postgres;

--
-- Name: usuario_listado(integer, integer); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_listado(in_limit integer, in_offset integer) RETURNS TABLE(usuario_id bigint, usuario_rol character varying, usuario_estado smallint, usuario_nombre character varying, usuario_login timestamp without time zone, usuario_creado timestamp without time zone, usuario_poster text)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

	        usuario.usuario_id,

	        usuario.usuario_rol,

	        usuario.usuario_estado,

	        usuario.usuario_nombre,

	        usuario.usuario_login,

	        usuario.usuario_creado,

			(

				SELECT

					CONCAT( usuario.usuario_id , '|' , imagen.imagen_id , '|' , imagen.imagen_extension ) AS usuario_poster

				FROM

					imagen

				WHERE

					imagen_objeto = usuario.usuario_id AND

					imagen_tipo = 'USU'

				ORDER BY imagen.imagen_orden ASC

				LIMIT 1

			)

	    FROM

	        usuario

	    ORDER BY

	        usuario.usuario_id DESC,

	        usuario.usuario_nombre ASC

	    LIMIT in_limit OFFSET in_offset

	    ;

	END $$;


ALTER FUNCTION public.usuario_listado(in_limit integer, in_offset integer) OWNER TO postgres;

--
-- Name: usuario_listado_movil(); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_listado_movil() RETURNS TABLE(usuario_id bigint, usuario_estado smallint, usuario_genero character varying, usuario_nombre character varying, usuario_password character varying, usuario_etiqueta bigint)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

	        usuario.usuario_id,

			usuario.usuario_estado,

			usuario.usuario_genero,

	        usuario.usuario_nombre,

	        usuario.usuario_password,

	        usuario.usuario_etiqueta

	    FROM

	        usuario

	    ORDER BY

	        usuario.usuario_id DESC,

	        usuario.usuario_nombre ASC

		;

	END $$;


ALTER FUNCTION public.usuario_listado_movil() OWNER TO postgres;

--
-- Name: usuario_nuevo(); Type: FUNCTION; Schema: public; Owner: app_vav
--

CREATE FUNCTION public.usuario_nuevo() RETURNS bigint
    LANGUAGE plpgsql
    AS $$

		DECLARE

			v_id bigint;

		BEGIN

        SELECT nextval('usuario_id_seq') INTO v_id;

        INSERT INTO usuario

        (

        	usuario_id

        )

		VALUES

		(

			v_id

		);

        RETURN v_id;

	END $$;


ALTER FUNCTION public.usuario_nuevo() OWNER TO app_vav;

--
-- Name: usuario_obtener_datos(bigint); Type: FUNCTION; Schema: public; Owner: postgres
--

CREATE FUNCTION public.usuario_obtener_datos(in_usuario_id bigint) RETURNS TABLE(usuario_id bigint, usuario_rol character varying, usuario_estado smallint, usuario_genero character varying, usuario_nombre character varying, usuario_email character varying, usuario_etiqueta bigint, usuario_login timestamp without time zone, usuario_creado timestamp without time zone, usuario_poster text)
    LANGUAGE plpgsql
    AS $$

		BEGIN

		return QUERY

	    SELECT

	        usuario.usuario_id,

	        usuario.usuario_rol,

	        usuario.usuario_estado,

	        usuario.usuario_genero,

	        usuario.usuario_nombre,

	        usuario.usuario_email,

	        usuario.usuario_etiqueta,

	        usuario.usuario_login,

	        usuario.usuario_creado,

			(

				SELECT

					CONCAT( usuario.usuario_id , '|' , imagen.imagen_id , '|' , imagen.imagen_extension ) AS usuario_poster

				FROM

					imagen

				WHERE

					imagen_objeto = usuario.usuario_id AND

					imagen_tipo = 'USU'

				ORDER BY imagen.imagen_orden ASC

				LIMIT 1

			)

	    FROM

	        usuario

	    WHERE

	        usuario.usuario_id = in_usuario_id

	    LIMIT 1

	    ;

	END $$;


ALTER FUNCTION public.usuario_obtener_datos(in_usuario_id bigint) OWNER TO postgres;

SET default_tablespace = '';

--
-- Name: candidato; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.candidato (
    candidato_id bigint NOT NULL,
    candidato_tipo character varying(3) DEFAULT 'ALC'::character varying,
    candidato_orden smallint DEFAULT 1 NOT NULL,
    candidato_zona bigint DEFAULT 0 NOT NULL,
    pacto_id bigint DEFAULT 1 NOT NULL,
    partido_id bigint DEFAULT 1 NOT NULL,
    candidato_nombre character varying(128),
    candidato_nombre_corto character varying(128),
    candidato_genero character varying(1) DEFAULT 'n'::character varying,
    candidato_independiente boolean DEFAULT false,
    candidato_lista character varying(12),
    candidato_nombres character varying(64),
    candidato_apellidos character varying(64)
);


ALTER TABLE public.candidato OWNER TO app_vav;

--
-- Name: candidato_candidato_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.candidato_candidato_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.candidato_candidato_id_seq OWNER TO app_vav;

--
-- Name: candidato_candidato_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.candidato_candidato_id_seq OWNED BY public.candidato.candidato_id;


--
-- Name: candidato_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.candidato_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.candidato_id_seq OWNER TO app_vav;

--
-- Name: candidato_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.candidato_id_seq OWNED BY public.candidato.candidato_id;


--
-- Name: comuna; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.comuna (
    comuna_id bigint NOT NULL,
    region_id bigint DEFAULT 1 NOT NULL,
    distrito_id smallint NOT NULL,
    comuna_nombre character varying(64)
);


ALTER TABLE public.comuna OWNER TO app_vav;

--
-- Name: comuna_comuna_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.comuna_comuna_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.comuna_comuna_id_seq OWNER TO app_vav;

--
-- Name: comuna_comuna_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.comuna_comuna_id_seq OWNED BY public.comuna.comuna_id;


--
-- Name: comuna_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.comuna_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.comuna_id_seq OWNER TO app_vav;

--
-- Name: comuna_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.comuna_id_seq OWNED BY public.comuna.comuna_id;


--
-- Name: imagen; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.imagen (
    imagen_id bigint NOT NULL,
    imagen_orden bigint NOT NULL,
    imagen_objeto bigint NOT NULL,
    imagen_tipo character varying(3) NOT NULL,
    imagen_estado smallint DEFAULT 1,
    imagen_titulo character varying(32),
    imagen_bajada character varying(64),
    imagen_tags character varying(128),
    imagen_extension character varying(4) NOT NULL,
    imagen_cambio bigint,
    imagen_creado timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT imagen_imagen_extension_check CHECK (((imagen_extension)::text = ANY (ARRAY[('.jpg'::character varying)::text, ('.gif'::character varying)::text, ('.png'::character varying)::text]))),
    CONSTRAINT imagen_imagen_tipo_check CHECK (((imagen_tipo)::text = 'USU'::text))
);


ALTER TABLE public.imagen OWNER TO app_vav;

--
-- Name: imagen_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.imagen_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.imagen_id_seq OWNER TO app_vav;

--
-- Name: imagen_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.imagen_id_seq OWNED BY public.imagen.imagen_id;


--
-- Name: imagen_imagen_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.imagen_imagen_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.imagen_imagen_id_seq OWNER TO app_vav;

--
-- Name: imagen_imagen_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.imagen_imagen_id_seq OWNED BY public.imagen.imagen_id;


--
-- Name: mesa; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.mesa (
    mesa_id bigint NOT NULL,
    usuario_id bigint DEFAULT 1 NOT NULL,
    mesa_tipo character varying(3) DEFAULT 'ALC'::character varying,
    mesa_zona bigint DEFAULT 0 NOT NULL,
    mesa_zona_titulo character varying(64),
    mesa_comuna character varying(64),
    mesa_local character varying(64),
    mesa_numero character varying(64) DEFAULT 'M '::character varying,
    mesa_orden smallint DEFAULT 1 NOT NULL,
    mesa_estado smallint DEFAULT 0 NOT NULL,
    mesa_destacada smallint DEFAULT 0 NOT NULL,
    mesa_votos_blancos smallint DEFAULT 0 NOT NULL,
    mesa_votos_nulos smallint DEFAULT 0 NOT NULL,
    mesa_cambio timestamp without time zone DEFAULT now() NOT NULL,
    mesa_creado timestamp without time zone DEFAULT now() NOT NULL
);


ALTER TABLE public.mesa OWNER TO app_vav;

--
-- Name: mesa_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.mesa_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.mesa_id_seq OWNER TO app_vav;

--
-- Name: mesa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.mesa_id_seq OWNED BY public.mesa.mesa_id;


--
-- Name: mesa_mesa_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.mesa_mesa_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.mesa_mesa_id_seq OWNER TO app_vav;

--
-- Name: mesa_mesa_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.mesa_mesa_id_seq OWNED BY public.mesa.mesa_id;


--
-- Name: pacto; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.pacto (
    pacto_id bigint NOT NULL,
    pacto_codigo character varying(24),
    pacto_nombre character varying(64)
);


ALTER TABLE public.pacto OWNER TO app_vav;

--
-- Name: pacto_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.pacto_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.pacto_id_seq OWNER TO app_vav;

--
-- Name: pacto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.pacto_id_seq OWNED BY public.pacto.pacto_id;


--
-- Name: pacto_pacto_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.pacto_pacto_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.pacto_pacto_id_seq OWNER TO app_vav;

--
-- Name: pacto_pacto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.pacto_pacto_id_seq OWNED BY public.pacto.pacto_id;


--
-- Name: partido; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.partido (
    partido_id bigint NOT NULL,
    partido_nombre character varying(64),
    partido_codigo character varying(16)
);


ALTER TABLE public.partido OWNER TO app_vav;

--
-- Name: partido_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.partido_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.partido_id_seq OWNER TO app_vav;

--
-- Name: partido_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.partido_id_seq OWNED BY public.partido.partido_id;


--
-- Name: partido_partido_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.partido_partido_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.partido_partido_id_seq OWNER TO app_vav;

--
-- Name: partido_partido_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.partido_partido_id_seq OWNED BY public.partido.partido_id;


--
-- Name: region; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.region (
    region_id bigint NOT NULL,
    region_nombre character varying(32),
    region_codigo character varying(5)
);


ALTER TABLE public.region OWNER TO app_vav;

--
-- Name: region_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.region_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.region_id_seq OWNER TO app_vav;

--
-- Name: region_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.region_id_seq OWNED BY public.region.region_id;


--
-- Name: region_region_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.region_region_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.region_region_id_seq OWNER TO app_vav;

--
-- Name: region_region_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.region_region_id_seq OWNED BY public.region.region_id;


--
-- Name: swich; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.swich (
    swich_id bigint NOT NULL,
    swich_mesas smallint DEFAULT 0,
    swich_mesa_1 smallint DEFAULT 0,
    swich_mesa_2 smallint DEFAULT 0,
    swich_mesa_3 smallint DEFAULT 0,
    swich_mesa_4 smallint DEFAULT 0,
    swich_votos character varying(1) DEFAULT 'p'::character varying,
    swich_cambio timestamp without time zone DEFAULT now() NOT NULL,
    swich_modo smallint
);


ALTER TABLE public.swich OWNER TO app_vav;

--
-- Name: swich_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.swich_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.swich_id_seq OWNER TO app_vav;

--
-- Name: swich_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.swich_id_seq OWNED BY public.swich.swich_id;


--
-- Name: swich_swich_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.swich_swich_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.swich_swich_id_seq OWNER TO app_vav;

--
-- Name: swich_swich_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.swich_swich_id_seq OWNED BY public.swich.swich_id;


--
-- Name: usuario; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.usuario (
    usuario_id bigint NOT NULL,
    usuario_rol character varying(2) DEFAULT 'OP'::character varying,
    usuario_estado smallint DEFAULT 1,
    usuario_genero character varying(1) DEFAULT 'n'::character varying,
    usuario_nombre character varying(32),
    usuario_email character varying(64),
    usuario_password character varying(32),
    usuario_etiqueta bigint DEFAULT 1,
    usuario_login timestamp without time zone DEFAULT now(),
    usuario_creado timestamp without time zone DEFAULT now() NOT NULL,
    CONSTRAINT usuario_usuario_genero_check CHECK (((usuario_genero)::text = ANY (ARRAY[('n'::character varying)::text, ('f'::character varying)::text, ('m'::character varying)::text]))),
    CONSTRAINT usuario_usuario_rol_check CHECK (((usuario_rol)::text = ANY (ARRAY[('AD'::character varying)::text, ('AM'::character varying)::text, ('OP'::character varying)::text, ('VZ'::character varying)::text])))
);


ALTER TABLE public.usuario OWNER TO app_vav;

--
-- Name: usuario_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.usuario_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.usuario_id_seq OWNER TO app_vav;

--
-- Name: usuario_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.usuario_id_seq OWNED BY public.usuario.usuario_id;


--
-- Name: usuario_usuario_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.usuario_usuario_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.usuario_usuario_id_seq OWNER TO app_vav;

--
-- Name: usuario_usuario_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.usuario_usuario_id_seq OWNED BY public.usuario.usuario_id;


--
-- Name: voto; Type: TABLE; Schema: public; Owner: app_vav
--

CREATE TABLE public.voto (
    voto_id bigint NOT NULL,
    candidato_id bigint DEFAULT 1 NOT NULL,
    mesa_id bigint DEFAULT 1 NOT NULL,
    voto_total smallint NOT NULL
);


ALTER TABLE public.voto OWNER TO app_vav;

--
-- Name: voto_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.voto_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.voto_id_seq OWNER TO app_vav;

--
-- Name: voto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.voto_id_seq OWNED BY public.voto.voto_id;


--
-- Name: voto_voto_id_seq; Type: SEQUENCE; Schema: public; Owner: app_vav
--

CREATE SEQUENCE public.voto_voto_id_seq
    START WITH 1
    INCREMENT BY 1
    NO MINVALUE
    NO MAXVALUE
    CACHE 1;


ALTER TABLE public.voto_voto_id_seq OWNER TO app_vav;

--
-- Name: voto_voto_id_seq; Type: SEQUENCE OWNED BY; Schema: public; Owner: app_vav
--

ALTER SEQUENCE public.voto_voto_id_seq OWNED BY public.voto.voto_id;


--
-- Name: candidato candidato_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.candidato ALTER COLUMN candidato_id SET DEFAULT nextval('public.candidato_id_seq'::regclass);


--
-- Name: comuna comuna_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.comuna ALTER COLUMN comuna_id SET DEFAULT nextval('public.comuna_id_seq'::regclass);


--
-- Name: imagen imagen_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.imagen ALTER COLUMN imagen_id SET DEFAULT nextval('public.imagen_id_seq'::regclass);


--
-- Name: mesa mesa_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.mesa ALTER COLUMN mesa_id SET DEFAULT nextval('public.mesa_id_seq'::regclass);


--
-- Name: pacto pacto_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.pacto ALTER COLUMN pacto_id SET DEFAULT nextval('public.pacto_id_seq'::regclass);


--
-- Name: partido partido_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.partido ALTER COLUMN partido_id SET DEFAULT nextval('public.partido_id_seq'::regclass);


--
-- Name: region region_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.region ALTER COLUMN region_id SET DEFAULT nextval('public.region_id_seq'::regclass);


--
-- Name: swich swich_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.swich ALTER COLUMN swich_id SET DEFAULT nextval('public.swich_id_seq'::regclass);


--
-- Name: usuario usuario_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.usuario ALTER COLUMN usuario_id SET DEFAULT nextval('public.usuario_id_seq'::regclass);


--
-- Name: voto voto_id; Type: DEFAULT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.voto ALTER COLUMN voto_id SET DEFAULT nextval('public.voto_id_seq'::regclass);


--
-- Data for Name: candidato; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.candidato VALUES
	(7477226, 'P', 2, 0, 339, 150, 'RECHAZO', 'RECHAZO', 'M', false, 'A', 'RECHAZO', ''),
	(16163631, 'P', 1, 0, 365, 149, 'APRUEBO', 'APRUEBO', 'M', false, 'A', 'APRUEBO', '');


--
-- Data for Name: comuna; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.comuna VALUES
	(2739, 3011, 27, 'Aysén'),
	(2740, 3011, 27, 'Cisnes'),
	(2741, 3011, 27, 'Guaitecas'),
	(2751, 3012, 28, 'Cabo De Hornos'),
	(2752, 3012, 28, 'Antártica'),
	(2508, 3002, 3, 'Antofagasta'),
	(2509, 3002, 3, 'Mejillones'),
	(2510, 3002, 3, 'Sierra Gorda'),
	(2511, 3002, 3, 'Taltal'),
	(2654, 3008, 21, 'Lebu'),
	(2655, 3008, 21, 'Arauco'),
	(2656, 3008, 21, 'Cañete'),
	(2657, 3008, 21, 'Contulmo'),
	(2658, 3008, 21, 'Curanilahue'),
	(2659, 3008, 21, 'Los Alamos'),
	(2660, 3008, 21, 'Tirúa'),
	(2822, 3015, 1, 'Arica'),
	(2823, 3015, 1, 'Camarones'),
	(2661, 3008, 21, 'Los ángeles'),
	(2662, 3008, 21, 'Antuco'),
	(2663, 3008, 21, 'Cabrero'),
	(2664, 3008, 21, 'Laja'),
	(2665, 3008, 21, 'Mulchén'),
	(2666, 3008, 21, 'Nacimiento'),
	(2667, 3008, 21, 'Negrete'),
	(2668, 3008, 21, 'Quilaco'),
	(2669, 3008, 21, 'Quilleco'),
	(2670, 3008, 21, 'San Rosendo'),
	(2671, 3008, 21, 'Santa Bárbara'),
	(2672, 3008, 21, 'Tucapel'),
	(2673, 3008, 21, 'Yumbel'),
	(2674, 3008, 21, 'Alto Biobío'),
	(2579, 3006, 15, 'Rancagua'),
	(2580, 3006, 15, 'Codegua'),
	(2581, 3006, 15, 'Coinco'),
	(2582, 3006, 15, 'Coltauco'),
	(2583, 3006, 15, 'Doñihue'),
	(2584, 3006, 15, 'Graneros'),
	(2585, 3006, 16, 'Las Cabras'),
	(2586, 3006, 15, 'Machalí'),
	(2587, 3006, 15, 'Malloa'),
	(2588, 3006, 15, 'Mostazal'),
	(2589, 3006, 15, 'Olivar'),
	(2590, 3006, 16, 'Peumo'),
	(2591, 3006, 16, 'Pichidegua'),
	(2592, 3006, 15, 'Quinta De Tilcoco'),
	(2593, 3006, 15, 'Rengo'),
	(2594, 3006, 15, 'Requínoa'),
	(2595, 3006, 16, 'San Vicente'),
	(2742, 3011, 27, 'Cochrane'),
	(2743, 3011, 27, 'Ohiggins'),
	(2744, 3011, 27, 'Tortel'),
	(2596, 3006, 16, 'Pichilemu'),
	(2597, 3006, 16, 'La Estrella'),
	(2598, 3006, 16, 'Litueche'),
	(2599, 3006, 16, 'Marchigue'),
	(2600, 3006, 16, 'Navidad'),
	(2601, 3006, 16, 'Paredones'),
	(2622, 3007, 18, 'Cauquenes'),
	(2623, 3007, 18, 'Chanco'),
	(2624, 3007, 18, 'Pelluhue'),
	(2675, 3009, 23, 'Temuco'),
	(2686, 3009, 23, 'Padre Las Casas'),
	(2676, 3009, 23, 'Carahue'),
	(2677, 3009, 23, 'Cunco'),
	(2678, 3009, 23, 'Curarrehue'),
	(2679, 3009, 23, 'Freire'),
	(2680, 3009, 22, 'Galvarino'),
	(2681, 3009, 23, 'Gorbea'),
	(2682, 3009, 22, 'Lautaro'),
	(2683, 3009, 23, 'Loncoche'),
	(2684, 3009, 22, 'Melipeuco'),
	(2685, 3009, 23, 'Nueva Imperial'),
	(2687, 3009, 22, 'Perquenco'),
	(2688, 3009, 23, 'Pitrufquén'),
	(2689, 3009, 23, 'Pucón'),
	(2690, 3009, 23, 'Saavedra'),
	(2691, 3009, 23, 'Teodoro Schmidt'),
	(2692, 3009, 23, 'Toltén'),
	(2693, 3009, 22, 'Vilcún'),
	(2694, 3009, 23, 'Villarrica'),
	(2695, 3009, 23, 'Cholchol'),
	(2793, 3013, 8, 'Colina'),
	(2794, 3013, 8, 'Lampa'),
	(2795, 3013, 8, 'Tiltil'),
	(2520, 3003, 4, 'Chañaral'),
	(2521, 3003, 4, 'Diego De Almagro'),
	(2716, 3010, 26, 'Castro'),
	(2717, 3010, 26, 'Ancud'),
	(2718, 3010, 26, 'Chonchi'),
	(2719, 3010, 26, 'Curaco De Vélez'),
	(2720, 3010, 26, 'Dalcahue'),
	(2721, 3010, 26, 'Puqueldón'),
	(2722, 3010, 26, 'Queilén'),
	(2723, 3010, 26, 'Quellón'),
	(2724, 3010, 26, 'Quemchi'),
	(2725, 3010, 26, 'Quinchao'),
	(2532, 3004, 5, 'Illapel'),
	(2533, 3004, 5, 'Canela'),
	(2534, 3004, 5, 'Los Vilos'),
	(2535, 3004, 5, 'Salamanca'),
	(2602, 3006, 16, 'San Fernando'),
	(2603, 3006, 16, 'Chépica'),
	(2604, 3006, 16, 'Chimbarongo'),
	(2605, 3006, 16, 'Lolol'),
	(2606, 3006, 16, 'Nancagua'),
	(2607, 3006, 16, 'Palmilla'),
	(2608, 3006, 16, 'Peralillo'),
	(2609, 3006, 16, 'Placilla'),
	(2610, 3006, 16, 'Pumanque'),
	(2611, 3006, 16, 'Santa Cruz'),
	(2648, 3008, 20, 'Penco'),
	(2651, 3008, 20, 'Talcahuano'),
	(2652, 3008, 20, 'Tomé'),
	(2653, 3008, 20, 'Hualpén'),
	(2642, 3008, 20, 'Concepción'),
	(2644, 3008, 20, 'Chiguayante'),
	(2645, 3008, 20, 'Florida'),
	(2643, 3008, 20, 'Coronel'),
	(2646, 3008, 20, 'Hualqui'),
	(2647, 3008, 21, 'Lota'),
	(2649, 3008, 20, 'San Pedro De La Paz'),
	(2650, 3008, 20, 'Santa Juana'),
	(2517, 3003, 4, 'Copiapó'),
	(2518, 3003, 4, 'Caldera'),
	(2519, 3003, 4, 'Tierra Amarilla'),
	(2790, 3013, 12, 'Puente Alto'),
	(2791, 3013, 12, 'Pirque'),
	(2792, 3013, 12, 'San José De Maipo'),
	(2737, 3011, 27, 'Coyhaique'),
	(2738, 3011, 27, 'Lago Verde'),
	(2625, 3007, 17, 'Curicó'),
	(2626, 3007, 17, 'Hualañé'),
	(2627, 3007, 17, 'Licantén'),
	(2628, 3007, 17, 'Molina'),
	(2629, 3007, 17, 'Rauco'),
	(2630, 3007, 17, 'Romeral'),
	(2631, 3007, 17, 'Sagrada Familia'),
	(2632, 3007, 17, 'Teno'),
	(2633, 3007, 17, 'Vichuquén'),
	(2826, 3016, 19, 'Chillán'),
	(2827, 3016, 19, 'Bulnes'),
	(2828, 3016, 19, 'Chillán Viejo'),
	(2829, 3016, 19, 'El Carmen'),
	(2830, 3016, 19, 'Pemuco'),
	(2831, 3016, 19, 'Pinto'),
	(2832, 3016, 19, 'Quillón'),
	(2833, 3016, 19, 'San Ignacio'),
	(2834, 3016, 19, 'Yungay'),
	(2512, 3002, 3, 'Calama'),
	(2513, 3002, 3, 'Ollagüe'),
	(2514, 3002, 3, 'San Pedro De Atacama'),
	(2526, 3004, 5, 'La Serena'),
	(2527, 3004, 5, 'Coquimbo'),
	(2528, 3004, 5, 'Andacollo'),
	(2529, 3004, 5, 'La Higuera'),
	(2530, 3004, 5, 'Paihuano'),
	(2531, 3004, 5, 'Vicuña'),
	(2745, 3011, 27, 'Chile Chico'),
	(2746, 3011, 27, 'Río Ibañez'),
	(2522, 3003, 4, 'Vallenar'),
	(2523, 3003, 4, 'Alto Del Carmen'),
	(2524, 3003, 4, 'Freirina'),
	(2525, 3003, 4, 'Huasco'),
	(2501, 3001, 2, 'Iquique'),
	(2502, 3001, 2, 'Alto Hospicio'),
	(2548, 3005, 7, 'Isla De Pascua'),
	(2835, 3016, 19, 'Quirihue'),
	(2836, 3016, 19, 'Cobquecura'),
	(2837, 3016, 19, 'Coelemu'),
	(2838, 3016, 19, 'Ninhue'),
	(2839, 3016, 19, 'Portezuelo'),
	(2840, 3016, 19, 'Ránquil'),
	(2841, 3016, 19, 'Trehuaco'),
	(2536, 3004, 5, 'Ovalle'),
	(2537, 3004, 5, 'Combarbalá'),
	(2538, 3004, 5, 'Monte Patria'),
	(2539, 3004, 5, 'Punitaqui'),
	(2540, 3004, 5, 'Río Hurtado'),
	(2634, 3007, 18, 'Linares'),
	(2635, 3007, 18, 'Colbún'),
	(2636, 3007, 18, 'Longaví'),
	(2637, 3007, 18, 'Parral'),
	(2638, 3007, 18, 'Retiro'),
	(2639, 3007, 18, 'San Javier'),
	(2640, 3007, 18, 'Villa Alegre'),
	(2641, 3007, 18, 'Yerbas Buenas'),
	(2707, 3010, 26, 'Puerto Montt'),
	(2708, 3010, 26, 'Calbuco'),
	(2709, 3010, 26, 'Cochamó'),
	(2710, 3010, 25, 'Fresia'),
	(2711, 3010, 25, 'Frutillar'),
	(2712, 3010, 25, 'Los Muermos'),
	(2713, 3010, 25, 'Llanquihue'),
	(2714, 3010, 26, 'Maullín'),
	(2715, 3010, 25, 'Puerto Varas'),
	(2549, 3005, 6, 'Los Andes'),
	(2550, 3005, 6, 'Calle Larga'),
	(2551, 3005, 6, 'Rinconada'),
	(2552, 3005, 6, 'San Esteban'),
	(2747, 3012, 28, 'Punta Arenas'),
	(2748, 3012, 28, 'Laguna Blanca'),
	(2749, 3012, 28, 'Río Verde'),
	(2750, 3012, 28, 'San Gregorio'),
	(2796, 3013, 14, 'San Bernardo'),
	(2797, 3013, 14, 'Buin'),
	(2798, 3013, 14, 'Calera De Tango'),
	(2799, 3013, 14, 'Paine'),
	(2696, 3009, 22, 'Angol'),
	(2697, 3009, 22, 'Collipulli'),
	(2698, 3009, 22, 'Curacautín'),
	(2699, 3009, 22, 'Ercilla'),
	(2700, 3009, 22, 'Lonquimay'),
	(2701, 3009, 22, 'Los Sauces'),
	(2702, 3009, 22, 'Lumaco'),
	(2703, 3009, 22, 'Purén'),
	(2704, 3009, 22, 'Renaico'),
	(2705, 3009, 22, 'Traiguén'),
	(2706, 3009, 22, 'Victoria'),
	(2575, 3005, 6, 'Quilpué'),
	(2576, 3005, 6, 'Limache'),
	(2577, 3005, 6, 'Olmué'),
	(2578, 3005, 6, 'Villa Alemana'),
	(2800, 3013, 14, 'Melipilla'),
	(2801, 3013, 14, 'Alhué'),
	(2802, 3013, 14, 'Curacaví'),
	(2803, 3013, 14, 'María Pinto'),
	(2804, 3013, 14, 'San Pedro'),
	(2726, 3010, 25, 'Osorno'),
	(2727, 3010, 25, 'Puerto Octay'),
	(2728, 3010, 25, 'Purranque'),
	(2729, 3010, 25, 'Puyehue'),
	(2730, 3010, 25, 'Río Negro'),
	(2731, 3010, 25, 'San Juan De La Costa'),
	(2732, 3010, 25, 'San Pablo'),
	(2733, 3010, 26, 'Chaitén'),
	(2734, 3010, 26, 'Futaleufú'),
	(2735, 3010, 26, 'Hualaihué'),
	(2736, 3010, 26, 'Palena'),
	(2824, 3015, 1, 'Putre'),
	(2825, 3015, 1, 'General Lagos'),
	(2553, 3005, 6, 'La Ligua'),
	(2554, 3005, 6, 'Cabildo'),
	(2555, 3005, 6, 'Papudo'),
	(2556, 3005, 6, 'Petorca'),
	(2557, 3005, 6, 'Zapallar'),
	(2842, 3016, 19, 'San Carlos'),
	(2843, 3016, 19, 'Coihueco'),
	(2844, 3016, 19, 'ñiquén'),
	(2845, 3016, 19, 'San Fabián');
INSERT INTO public.comuna VALUES
	(2846, 3016, 19, 'San Nicolás'),
	(2558, 3005, 6, 'Quillota'),
	(2559, 3005, 6, 'Calera'),
	(2560, 3005, 6, 'Hijuelas'),
	(2561, 3005, 6, 'La Cruz'),
	(2562, 3005, 6, 'Nogales'),
	(2818, 3014, 24, 'La Unión'),
	(2819, 3014, 24, 'Futrono'),
	(2820, 3014, 24, 'Lago Ranco'),
	(2821, 3014, 24, 'Río Bueno'),
	(2563, 3005, 7, 'San Antonio'),
	(2564, 3005, 7, 'Algarrobo'),
	(2565, 3005, 7, 'Cartagena'),
	(2566, 3005, 7, 'El Quisco'),
	(2567, 3005, 7, 'El Tabo'),
	(2568, 3005, 7, 'Santo Domingo'),
	(2569, 3005, 6, 'San Felipe'),
	(2570, 3005, 6, 'Catemu'),
	(2571, 3005, 6, 'Llaillay'),
	(2572, 3005, 6, 'Panquehue'),
	(2573, 3005, 6, 'Putaendo'),
	(2574, 3005, 6, 'Santa María'),
	(2761, 3013, 9, 'Conchalí'),
	(2764, 3013, 9, 'Huechuraba'),
	(2781, 3013, 8, 'Pudahuel'),
	(2782, 3013, 8, 'Quilicura'),
	(2785, 3013, 9, 'Renca'),
	(2758, 3013, 10, 'Santiago'),
	(2760, 3013, 9, 'Cerro Navia'),
	(2765, 3013, 9, 'Independencia'),
	(2774, 3013, 9, 'Lo Prado'),
	(2783, 3013, 9, 'Quinta Normal'),
	(2784, 3013, 9, 'Recoleta'),
	(2759, 3013, 8, 'Cerrillos'),
	(2763, 3013, 8, 'Estación Central'),
	(2776, 3013, 8, 'Maipú'),
	(2770, 3013, 11, 'La Reina'),
	(2771, 3013, 11, 'Las Condes'),
	(2772, 3013, 11, 'Lo Barnechea'),
	(2777, 3013, 10, 'ñuñoa'),
	(2780, 3013, 10, 'Providencia'),
	(2789, 3013, 11, 'Vitacura'),
	(2767, 3013, 12, 'La Florida'),
	(2768, 3013, 10, 'La Granja'),
	(2775, 3013, 10, 'Macul'),
	(2779, 3013, 11, 'Peñalolén'),
	(2786, 3013, 10, 'San Joaquín'),
	(2762, 3013, 13, 'El Bosque'),
	(2766, 3013, 13, 'La Cisterna'),
	(2769, 3013, 12, 'La Pintana'),
	(2773, 3013, 13, 'Lo Espejo'),
	(2778, 3013, 13, 'Pedro Aguirre Cerda'),
	(2787, 3013, 13, 'San Miguel'),
	(2788, 3013, 13, 'San Ramón'),
	(2805, 3013, 14, 'Talagante'),
	(2806, 3013, 14, 'El Monte'),
	(2807, 3013, 14, 'Isla De Maipo'),
	(2808, 3013, 14, 'Padre Hurtado'),
	(2809, 3013, 14, 'Peñaflor'),
	(2612, 3007, 17, 'Talca'),
	(2613, 3007, 17, 'Constitución'),
	(2614, 3007, 17, 'Curepto'),
	(2615, 3007, 17, 'Empedrado'),
	(2616, 3007, 17, 'Maule'),
	(2617, 3007, 17, 'Pelarco'),
	(2618, 3007, 17, 'Pencahue'),
	(2619, 3007, 17, 'Río Claro'),
	(2620, 3007, 17, 'San Clemente'),
	(2621, 3007, 17, 'San Rafael'),
	(2503, 3001, 2, 'Pozo Almonte'),
	(2504, 3001, 2, 'Camiña'),
	(2505, 3001, 2, 'Colchane'),
	(2506, 3001, 2, 'Huara'),
	(2507, 3001, 2, 'Pica'),
	(2753, 3012, 28, 'Porvenir'),
	(2754, 3012, 28, 'Primavera'),
	(2755, 3012, 28, 'Timaukel'),
	(2515, 3002, 3, 'Tocopilla'),
	(2516, 3002, 3, 'María Elena'),
	(2756, 3012, 28, 'Natales'),
	(2757, 3012, 28, 'Torres Del Paine'),
	(2810, 3014, 24, 'Valdivia'),
	(2811, 3014, 24, 'Corral'),
	(2812, 3014, 24, 'Lanco'),
	(2813, 3014, 24, 'Los Lagos'),
	(2814, 3014, 24, 'Mafil'),
	(2815, 3014, 24, 'Mariquina'),
	(2816, 3014, 24, 'Paillaco'),
	(2817, 3014, 24, 'Panguipulli'),
	(2543, 3005, 7, 'Concón'),
	(2545, 3005, 6, 'Puchuncaví'),
	(2546, 3005, 6, 'Quintero'),
	(2547, 3005, 7, 'Viña Del Mar'),
	(2541, 3005, 7, 'Valparaíso'),
	(2542, 3005, 7, 'Casablanca'),
	(2544, 3005, 7, 'Juan Fernández');


--
-- Data for Name: imagen; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.imagen VALUES
	(8, 0, 4, 'USU', 1, NULL, NULL, NULL, '.jpg', 1602265410, '2020-10-09 14:43:31.094739'),
	(7, 1, 4, 'USU', 1, NULL, NULL, NULL, '.png', 1600980043, '2020-09-24 17:40:43.731684'),
	(4, 2, 4, 'USU', 1, NULL, NULL, NULL, '.jpg', 1583847203, '2020-03-10 10:33:24.036709'),
	(6, 0, 5, 'USU', 1, NULL, NULL, NULL, '.png', 1600980020, '2020-09-24 17:40:21.014274'),
	(5, 1, 5, 'USU', 1, NULL, NULL, NULL, '.jpg', 1583847295, '2020-03-10 10:34:55.266077');


--
-- Data for Name: mesa; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.mesa VALUES
	(8, 29, 'P', 0, 'Región Metropolitana', 'Vitacura', 'LICEO PRUEBA', 'M 25', 1, 1, 0, 0, 0, '2022-07-18 23:12:00.019479', '2022-07-12 16:24:41.371846'),
	(7, 4, 'P', 0, 'Región Metropolitana', 'San Bernardo', 'liceo bicentenario gran d', 'M 15', 1, 1, 0, 0, 0, '2022-07-18 23:50:43.87277', '2022-07-11 11:41:44.747886'),
	(5, 4, 'P', 0, 'Región Metropolitana', 'Providencia', 'COLEGIO SAGRADOS', 'M 25', 1, 1, 0, 0, 0, '2022-07-18 23:51:15.977965', '2022-07-11 11:35:57.927045'),
	(6, 4, 'P', 0, 'Región Metropolitana', 'Las Condes', 'los dominicos', 'M 7', 1, 1, 0, 0, 0, '2022-07-18 16:10:24.900545', '2022-07-11 11:39:08.968328'),
	(14, 4, 'P', 0, 'Región Metropolitana', 'La Florida', 'colegio la florida', 'M 25', 1, 1, 0, 0, 0, '2022-07-18 22:59:24.944516', '2022-07-18 15:56:02.518966');


--
-- Data for Name: pacto; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.pacto VALUES
	(315, '', 'Sin Pacto'),
	(318, 'AC', 'Ecologistas E Independientes'),
	(319, 'AU', 'Chile Vamos Renovacion Nacional - Independientes'),
	(320, 'AD', 'Chile Vamos Udi - Independientes'),
	(321, 'AQ', 'Chile Vamos Evopoli - Independientes'),
	(322, 'AI', 'Chile Vamos - Pri E Independientes'),
	(323, 'AV', 'Frente Amplio'),
	(324, 'AG', 'Unidad Constituyente'),
	(325, 'AJ', 'Democracia Ciudadana'),
	(326, 'AS', 'Cambio Radical Progresista'),
	(341, 'AP', 'Frente Social Cristiano'),
	(344, 'BD', 'Republicanos E Independientes'),
	(345, 'AZ', 'Partido Conservador Cristiano E Independientes'),
	(346, 'AN', 'Dignidad Ahora'),
	(347, 'AN', 'Dignidad Ahora'),
	(348, 'AF', 'Humanicemos Chile'),
	(349, 'AW', 'Independientes Unidos'),
	(350, 'AW', 'Independientes Unidos'),
	(351, 'AW', 'Independientes Unidos'),
	(352, 'AX', 'Regionalistas Verdes E Independientes'),
	(353, 'AT', 'Nuevo Tiempo'),
	(354, 'AT', 'Nuevo Tiempo'),
	(355, 'AL', 'Partido Ecologista Verde'),
	(356, 'AL', 'Partido Ecologista Verde'),
	(358, 'AA', 'Chile Podemos +'),
	(359, 'AO', 'Por Un Chile Digno'),
	(362, 'AK', 'Frente Por La Unidad De La Clase Trabajadora'),
	(363, 'AE', 'Partido De Trabajadores Revolucionarios'),
	(364, 'AE', 'Partido De Trabajadores Revolucionarios'),
	(366, 'AR', 'Apruebo Dignidad'),
	(368, 'AB', 'Partido De La Gente'),
	(369, 'AB', 'Partido De La Gente'),
	(371, 'AH', 'Nuevo Pacto Social'),
	(375, 'AM', 'Union Patriotica'),
	(376, 'AM', 'Union Patriotica'),
	(999, '', 'Independiente'),
	(365, 'A. DIGNIDAD', 'Apruebo Dignidad'),
	(339, 'F. S. CRISTIANO', 'Frente Social Cristiano'),
	(370, 'N. PACTO SOCIAL', 'Nuevo Pacto Social'),
	(357, 'CHILE PODEMOS+', 'Chile Podemos +'),
	(374, 'U. PATRIÓTICA', 'Union Patriotica'),
	(373, 'P. PROGRESISTA', 'Partido Progresista De Chile'),
	(367, 'P. DE LA GENTE', 'Partido De La Gente');


--
-- Data for Name: partido; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.partido VALUES
	(2, 'Partido Democrata Cristiano', 'DC'),
	(37, 'Evolucion Politica', 'EVO'),
	(99, 'Independientes', 'IND'),
	(139, 'Partido Progresista De Chile', 'PRO'),
	(147, 'Union Patriotica', 'UPA'),
	(149, 'Convergencia Social', 'CS'),
	(150, 'Partido Republicano De Chile', 'REP'),
	(157, 'Partido De La Gente', 'PDG'),
	(319001, 'Renovacion Nacional', 'RN'),
	(319099, 'Independientes', 'IND'),
	(320003, 'Union Democrata Independiente', 'UDI'),
	(320099, 'Independientes', 'IND'),
	(321037, 'Evolucion Politica', 'EVO'),
	(321099, 'Independientes', 'IND'),
	(322099, 'Independientes', 'IND'),
	(322140, 'Partido Regionalista Independiente Democrata', 'PRI'),
	(339150, 'Partido Republicano De Chile', 'REP'),
	(339162, 'Partido Conservador Cristiano', 'PCC'),
	(341150, 'Partido Republicano De Chile', 'REP'),
	(341162, 'Partido Conservador Cristiano', 'PCC'),
	(344099, 'Independientes', 'IND'),
	(344150, 'Partido Republicano De Chile', 'PLR'),
	(345099, 'Independientes', 'IND'),
	(345162, 'Partido Conservador Cristiano', 'PCC'),
	(346008, 'Partido Humanista', 'PH'),
	(346144, 'Igualdad', 'PI'),
	(347008, 'Partido Humanista', 'PH'),
	(347144, 'Igualdad', 'PI'),
	(348008, 'Partido Humanista', 'PH'),
	(348099, 'Independientes', 'IND'),
	(349148, 'Partido Nacional Ciudadano', 'PNC'),
	(349180, 'Centro Unido', 'CU'),
	(350148, 'Partido Nacional Ciudadano', 'PNC'),
	(350180, 'Centro Unido', 'CU'),
	(351099, 'Independientes', 'IND'),
	(351148, 'Partido Nacional Ciudadano', 'PNC'),
	(351180, 'Centro Unido', 'CU'),
	(352099, 'Independientes', 'IND'),
	(352130, 'Federacion Regionalista Verde Social', 'FRVS'),
	(353126, 'Nuevo Tiempo', 'NT'),
	(354126, 'Nuevo Tiempo', 'NT'),
	(355142, 'Partido Ecologista Verde', 'PEV'),
	(356142, 'Partido Ecologista Verde', 'PEV'),
	(357001, 'Renovacion Nacional', 'RN'),
	(357003, 'Union Democrata Independiente', 'UDI'),
	(357037, 'Evolucion Politica', 'EVO'),
	(357140, 'Partido Regionalista Independiente Democrata', 'PRI'),
	(358001, 'Renovacion Nacional', 'RN'),
	(358003, 'Union Democrata Independiente', 'UDI'),
	(358037, 'Evolucion Politica', 'EVO'),
	(358140, 'Partido Regionalista Independiente Democrata', 'PRI'),
	(362099, 'Independientes', 'IND'),
	(362135, 'Partido De Trabajadores Revolucionarios', 'PTR'),
	(363135, 'Partido De Trabajadores Revolucionarios', 'PTR'),
	(364135, 'Partido De Trabajadores Revolucionarios', 'PTR'),
	(365006, 'Partido Comunista De Chile', 'PC'),
	(365045, 'Revolucion Democratica', 'RD'),
	(365130, 'Federacion Regionalista Verde Social', 'FRVS'),
	(365143, 'Comunes', 'COM'),
	(365149, 'Convergencia Social', 'CS'),
	(366006, 'Partido Comunista De Chile', 'PC'),
	(366045, 'Revolucion Democratica', 'RD'),
	(366130, 'Federacion Regionalista Verde Social', 'FRVS'),
	(366143, 'Comunes', 'COM'),
	(366149, 'Convergencia Social', 'CS'),
	(367157, 'Partido De La Gente', 'PDG'),
	(368157, 'Partido De La Gente', 'PDG'),
	(369157, 'Partido De La Gente', 'PDG'),
	(370002, 'Partido Democrata Cristiano', 'DC'),
	(370004, 'Partido Por La Democracia', 'PPD'),
	(370005, 'Partido Socialista De Chile', 'PS'),
	(370007, 'Partido Radical De Chile', 'PR'),
	(370137, 'Partido Liberal De Chile', 'PL'),
	(371002, 'Partido Democrata Cristiano', 'DC'),
	(371004, 'Partido Por La Democracia', 'PPD'),
	(371005, 'Partido Socialista De Chile', 'PS'),
	(371007, 'Partido Radical De Chile', 'PR'),
	(371137, 'Partido Liberal De Chile', 'PL'),
	(371138, 'Ciudadanos', 'CIU'),
	(373139, 'Partido Progresista De Chile', 'PRO'),
	(374147, 'Union Patriotica', 'UPA'),
	(375147, 'Union Patriotica', 'UPA'),
	(376147, 'Union Patriotica', 'UPA'),
	(318327099, 'Independientes', 'IND'),
	(318327142, 'Partido Ecologista Verde', 'PEV'),
	(323328099, 'Independientes', 'IND'),
	(323328149, 'Convergencia Social', 'CS'),
	(323329045, 'Revolucion Democratica', 'RD'),
	(323329099, 'Independientes', 'IND'),
	(323330099, 'Independientes', 'IND'),
	(323330137, 'Partido Liberal De Chile', 'PL'),
	(323331099, 'Independientes', 'IND'),
	(323331143, 'Comunes', 'COM'),
	(324332005, 'Partido Socialista De Chile', 'PS'),
	(324332099, 'Independientes', 'IND'),
	(324333004, 'Partido Por La Democracia', 'PPD'),
	(324333099, 'Independientes', 'IND'),
	(325334002, 'Partido Democrata Cristiano', 'PDC'),
	(325334099, 'Independientes', 'IND'),
	(325335099, 'Independientes', 'IND'),
	(325335138, 'Ciudadanos', 'CIU'),
	(326336007, 'Partido Radical De Chile', 'PR'),
	(326336099, 'Independientes', 'IND'),
	(326337099, 'Independientes', 'IND'),
	(326337139, 'Partido Progresista De Chile', 'PRO'),
	(359360006, 'Partido Comunista De Chile', 'PCC'),
	(359360099, 'Independientes', 'IND'),
	(359361099, 'Independientes', 'IND'),
	(359361144, 'Igualdad', 'PI');


--
-- Data for Name: region; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.region VALUES
	(3015, 'Región de Arica y Parinacota', 'XV'),
	(3001, 'Región de Tarapacá', 'I'),
	(3002, 'Región de Antofagasta', 'II'),
	(3003, 'Región de Atacama', 'III'),
	(3004, 'Región de Coquimbo', 'IV'),
	(3005, 'Región de Valparaíso', 'V'),
	(3013, 'Región Metropolitana', 'RM'),
	(3006, 'Región de O’higgins', 'VI'),
	(3007, 'Región del Maule', 'VII'),
	(3016, 'Región de Ñuble', 'XVI'),
	(3008, 'Región del Biobio', 'VIII'),
	(3009, 'Región de la Araucania', 'IX'),
	(3014, 'Región de Los Rios', 'XIV'),
	(3010, 'Región de Los Lagos', 'X'),
	(3011, 'Región de Aysén', 'XI'),
	(3012, 'Región de Magallanes', 'XII');


--
-- Data for Name: swich; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.swich VALUES
	(1, 2, 7, 14, 0, 0, '0', '2022-07-19 01:00:03.285839', 0);


--
-- Data for Name: usuario; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.usuario VALUES
	(4, 'AD', 0, 'm', 'Ivan Villarroel', 'ivan.villarroel@turner.com', 'leon', 3, '2020-03-10 10:33:05.700099', '2020-03-10 10:33:05.700099'),
	(11, 'AD', 0, 'n', 'Jaima Lara', 'jaime', 'warner', 1, '2020-10-14 11:05:01.113423', '2020-10-14 11:05:01.113423'),
	(29, 'OP', 1, 'n', 'Prensa 1', 'prensa1', 'chv', 1, '2021-05-15 19:06:10.580988', '2021-05-15 19:06:10.580988'),
	(30, 'OP', 1, 'n', 'Prensa 2', 'prensa2', 'chv', 1, '2021-05-16 12:02:19.180109', '2021-05-16 12:02:19.180109'),
	(32, 'OP', 1, 'n', 'Prensa 4', 'prensa4', 'chv', 1, '2021-05-16 12:30:59.800617', '2021-05-16 12:30:59.800617'),
	(33, 'OP', 1, 'n', 'Prensa 5', 'prensa5', 'chv', 1, '2021-05-16 12:32:27.107286', '2021-05-16 12:32:27.107286'),
	(34, 'OP', 1, 'n', 'prensa6', 'prensa6', 'chv', 1, '2021-05-16 12:32:44.65376', '2021-05-16 12:32:44.65376'),
	(35, 'OP', 1, 'n', 'Prensa 7', 'prensa7', 'chv', 1, '2021-05-16 12:33:04.883941', '2021-05-16 12:33:04.883941'),
	(36, 'OP', 1, 'n', 'Prensa 8', 'prensa8', 'chv', 1, '2021-05-16 12:33:26.60897', '2021-05-16 12:33:26.60897'),
	(37, 'OP', 1, 'n', 'Prensa 9', 'prensa9', 'chv', 1, '2021-05-16 12:33:42.400539', '2021-05-16 12:33:42.400539'),
	(38, 'OP', 1, 'n', 'Prensa 10', 'prensa10', 'chv', 1, '2021-05-16 12:34:02.97873', '2021-05-16 12:34:02.97873'),
	(39, 'OP', 1, 'n', 'Prensa 11', 'prensa11', 'chv', 1, '2021-05-16 12:34:24.488852', '2021-05-16 12:34:24.488852'),
	(40, 'OP', 1, 'n', 'Prensa 12', 'prensa12', 'chv', 1, '2021-05-16 12:34:43.359367', '2021-05-16 12:34:43.359367'),
	(42, 'OP', 1, 'n', 'Prensa 14', 'prensa14', 'chv', 1, '2021-05-16 12:35:20.881198', '2021-05-16 12:35:20.881198'),
	(43, 'OP', 1, 'n', 'Prensa 15', 'prensa15', 'chv', 1, '2021-05-16 12:35:46.504819', '2021-05-16 12:35:46.504819'),
	(41, 'OP', 1, 'n', 'Prensa 13', 'prensa13', 'chv', 1, '2021-05-16 12:35:05.598766', '2021-05-16 12:35:05.598766'),
	(31, 'OP', 1, 'n', 'Prensa 3', 'prensa3', 'chv', 1, '2021-05-16 12:09:04.143502', '2021-05-16 12:09:04.143502'),
	(5, 'AD', 0, 'm', 'Alexis Farfan', 'afarfan', 'mateo', 8, '2020-03-10 10:34:22.738729', '2020-03-10 10:34:22.738729');


--
-- Data for Name: voto; Type: TABLE DATA; Schema: public; Owner: app_vav
--

INSERT INTO public.voto VALUES
	(14, 16163631, 7, 13),
	(13, 7477226, 7, 493),
	(9, 7477226, 5, 20),
	(28, 16163631, 14, 999),
	(27, 7477226, 14, 999),
	(16, 16163631, 8, 478),
	(15, 7477226, 8, 622),
	(12, 16163631, 6, 176),
	(11, 7477226, 6, 68),
	(10, 16163631, 5, 16);


--
-- Name: candidato_candidato_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.candidato_candidato_id_seq', 1, false);


--
-- Name: candidato_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.candidato_id_seq', 1, true);


--
-- Name: comuna_comuna_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.comuna_comuna_id_seq', 1, false);


--
-- Name: comuna_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.comuna_id_seq', 1, false);


--
-- Name: imagen_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.imagen_id_seq', 8, true);


--
-- Name: imagen_imagen_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.imagen_imagen_id_seq', 1, false);


--
-- Name: mesa_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.mesa_id_seq', 14, true);


--
-- Name: mesa_mesa_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.mesa_mesa_id_seq', 1, false);


--
-- Name: pacto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.pacto_id_seq', 1, false);


--
-- Name: pacto_pacto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.pacto_pacto_id_seq', 1, false);


--
-- Name: partido_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.partido_id_seq', 1, true);


--
-- Name: partido_partido_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.partido_partido_id_seq', 1, false);


--
-- Name: region_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.region_id_seq', 1, false);


--
-- Name: region_region_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.region_region_id_seq', 1, false);


--
-- Name: swich_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.swich_id_seq', 1, true);


--
-- Name: swich_swich_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.swich_swich_id_seq', 1, false);


--
-- Name: usuario_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.usuario_id_seq', 47, true);


--
-- Name: usuario_usuario_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.usuario_usuario_id_seq', 1, false);


--
-- Name: voto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.voto_id_seq', 28, true);


--
-- Name: voto_voto_id_seq; Type: SEQUENCE SET; Schema: public; Owner: app_vav
--

SELECT pg_catalog.setval('public.voto_voto_id_seq', 1, false);


--
-- Name: candidato candidato_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.candidato
    ADD CONSTRAINT candidato_pkey PRIMARY KEY (candidato_id);


--
-- Name: comuna comuna_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.comuna
    ADD CONSTRAINT comuna_pkey PRIMARY KEY (comuna_id);


--
-- Name: imagen imagen_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.imagen
    ADD CONSTRAINT imagen_pkey PRIMARY KEY (imagen_id);


--
-- Name: mesa mesa_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.mesa
    ADD CONSTRAINT mesa_pkey PRIMARY KEY (mesa_id);


--
-- Name: pacto pacto_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.pacto
    ADD CONSTRAINT pacto_pkey PRIMARY KEY (pacto_id);


--
-- Name: partido partido_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.partido
    ADD CONSTRAINT partido_pkey PRIMARY KEY (partido_id);


--
-- Name: region region_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.region
    ADD CONSTRAINT region_pkey PRIMARY KEY (region_id);


--
-- Name: swich swich_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.swich
    ADD CONSTRAINT swich_pkey PRIMARY KEY (swich_id);


--
-- Name: usuario usuario_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.usuario
    ADD CONSTRAINT usuario_pkey PRIMARY KEY (usuario_id);


--
-- Name: voto voto_pkey; Type: CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.voto
    ADD CONSTRAINT voto_pkey PRIMARY KEY (voto_id);


--
-- Name: voto candidato_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.voto
    ADD CONSTRAINT candidato_id_fk FOREIGN KEY (candidato_id) REFERENCES public.candidato(candidato_id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: candidato candidato_pacto_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.candidato
    ADD CONSTRAINT candidato_pacto_id_fkey FOREIGN KEY (pacto_id) REFERENCES public.pacto(pacto_id) ON DELETE CASCADE;


--
-- Name: candidato candidato_partido_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.candidato
    ADD CONSTRAINT candidato_partido_id_fkey FOREIGN KEY (partido_id) REFERENCES public.partido(partido_id) ON DELETE CASCADE;


--
-- Name: comuna comuna_region_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.comuna
    ADD CONSTRAINT comuna_region_id_fkey FOREIGN KEY (region_id) REFERENCES public.region(region_id) ON DELETE RESTRICT;


--
-- Name: voto mesa_id_fk; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.voto
    ADD CONSTRAINT mesa_id_fk FOREIGN KEY (mesa_id) REFERENCES public.mesa(mesa_id) ON UPDATE CASCADE ON DELETE CASCADE;


--
-- Name: mesa mesa_usuario_id_fkey; Type: FK CONSTRAINT; Schema: public; Owner: app_vav
--

ALTER TABLE ONLY public.mesa
    ADD CONSTRAINT mesa_usuario_id_fkey FOREIGN KEY (usuario_id) REFERENCES public.usuario(usuario_id) ON DELETE CASCADE;


--
-- Name: SCHEMA public; Type: ACL; Schema: -; Owner: app_vav
--

REVOKE ALL ON SCHEMA public FROM PUBLIC;
REVOKE ALL ON SCHEMA public FROM app_vav;
GRANT ALL ON SCHEMA public TO app_vav;
GRANT ALL ON SCHEMA public TO postgres;
GRANT ALL ON SCHEMA public TO PUBLIC;


--
-- Name: TABLE candidato; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.candidato FROM PUBLIC;
REVOKE ALL ON TABLE public.candidato FROM app_vav;
GRANT ALL ON TABLE public.candidato TO app_vav;


--
-- Name: TABLE comuna; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.comuna FROM PUBLIC;
REVOKE ALL ON TABLE public.comuna FROM app_vav;
GRANT ALL ON TABLE public.comuna TO app_vav;


--
-- Name: TABLE mesa; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.mesa FROM PUBLIC;
REVOKE ALL ON TABLE public.mesa FROM app_vav;
GRANT ALL ON TABLE public.mesa TO app_vav;


--
-- Name: TABLE pacto; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.pacto FROM PUBLIC;
REVOKE ALL ON TABLE public.pacto FROM app_vav;
GRANT ALL ON TABLE public.pacto TO app_vav;


--
-- Name: TABLE partido; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.partido FROM PUBLIC;
REVOKE ALL ON TABLE public.partido FROM app_vav;
GRANT ALL ON TABLE public.partido TO app_vav;


--
-- Name: TABLE region; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.region FROM PUBLIC;
REVOKE ALL ON TABLE public.region FROM app_vav;
GRANT ALL ON TABLE public.region TO app_vav;


--
-- Name: TABLE voto; Type: ACL; Schema: public; Owner: app_vav
--

REVOKE ALL ON TABLE public.voto FROM PUBLIC;
REVOKE ALL ON TABLE public.voto FROM app_vav;
GRANT ALL ON TABLE public.voto TO app_vav;


--
-- PostgreSQL database dump complete
--

